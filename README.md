# LinuxMonitoring_2.0

## Part 1. Генератор файлов

Bash-скрипт. Скрипт запускается с 6 параметрами. Пример запуска скрипта: \
`main.sh /opt/test 4 az 5 az.az 3`

**Параметр 1** - это абсолютный путь. \
**Параметр 2** - количество вложенных папок. \
**Параметр 3** - список букв английского алфавита, используемый в названии папок (не более 7 знаков). \
**Параметр 4** - количество файлов в каждой созданной папке. \
**Параметр 5** - список букв английского алфавита, используемый в имени файла и расширении (не более 7 знаков для имени, не более 3 знаков для расширения). \
**Параметр 6** - размер файлов (в килобайтах, но не более 100).

При запуске скрипта в указанном в параметре 1 месте, создаются папки и файлы в них с соответствующими именами и размером.  
Скрипт остановит работу, если в файловой системе (в разделе /) останется 1 Гб свободного места.  
Создается лог файл с данными по всем созданным папкам и файлам (полный путь, дата создания, размер для файлов).

## Part 2. Засорение файловой системы

Bash-скрипт. Скрипт запускается с 3 параметрами. Пример запуска скрипта: \
`main.sh az az.az 3`

**Параметр 1** - список букв английского алфавита, используемый в названии папок (не более 7 знаков). \
**Параметр 2** - список букв английского алфавита, используемый в имени файла и расширении (не более 7 знаков для имени, не более 3 знаков для расширения). \
**Параметр 3** - размер файла (в Мегабайтах, но не более 100).

При запуске скрипта, в различных (любых, кроме путей содержащих **bin** или **sbin**) местах файловой системы создаются папки с файлами.
Количество вложенных папок - до 100. Количество файлов в каждой папке - случайное число (для каждой папки своё).  
Скрипт остановит работу, когда в файловой системе (в разделе /) останется 1 Гб свободного места.

Создается лог файл с данными по всем созданным папкам и файлам (полный путь, дата создания, размер для файлов).  
В конце работы скрипта, выводится на экран время начало работы скрипта, время окончания и общее время его работы. Эти данные так же записываются в лог файл. \
Если память остается, выводится соответствующее сообщение.

## Part 3. Очистка файловой системы

Bash-скрипт. Скрипт запускается с 1 параметром.
Скрипт очищает систему от созданных в [Part 2](#part-2-засорение-файловой-системы) папок и файлов 3 способами:

1. По лог файлу
2. По дате и времени создания
3. По маске имени (т.е. символы, нижнее подчёркивание и дата).

Способ очистки задается при запуске скрипта, как параметр со значением 1, 2 или 3.

## Part 4. Генератор логов

Bash-скрипт, генерирующий 5 файлов логов **nginx** в *combined* формате.
Каждый лог содержит информацию за 1 день.

За день (время изменяется в скрипте) генерируется случайное число записей от 100 до 1000.
Для каждой записи случайным образом генерируются:

1. IP (любые корректные, т.е. не будет ip вида 999.111.777.777)
2. Коды ответа (200, 201, 400, 401, 403, 404, 500, 501, 502, 503)
3. Методы (GET, POST, PUT, PATCH, DELETE)
4. Даты (в рамках заданного дня лога, идут по увеличению)
5. URL запроса агента
6. Агенты (Mozilla, Google Chrome, Opera, Safari, Internet Explorer, Microsoft Edge, Crawler and bot, Library and net tool)

## Part 5. Мониторинг

Bash-скрипт для разбора логов **nginx** из [Части 4](#part-4-генератор-логов) через **awk**.

Скрипт запускается с 1 параметром, который принимает значение 1, 2, 3 или 4.
В зависимости от значения параметра выводится:

1. Все записи, отсортированные по коду ответа
2. Все уникальные IP, встречающиеся в записях
3. Все запросы с ошибками (код ответа - 4хх или 5хх)
4. Все уникальные IP, которые встречаются среди ошибочных запросов
